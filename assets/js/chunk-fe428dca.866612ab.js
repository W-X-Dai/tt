(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fe428dca"],{2155:function(e,s,a){"use strict";a.r(s);var i=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"setting-main"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{sm:24,md:10,lg:10}},[a("div",{staticClass:"left"},[a("p",{staticClass:"section-title"},[e._v(e._s(e.$t("m.Change_Password")))]),a("el-form",{ref:"formPassword",staticClass:"setting-content",attrs:{model:e.formPassword,rules:e.rulePassword}},[a("el-form-item",{attrs:{label:e.$t("m.Old_Password"),prop:"oldPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formPassword.oldPassword,callback:function(s){e.$set(e.formPassword,"oldPassword",s)},expression:"formPassword.oldPassword"}})],1),a("el-form-item",{attrs:{label:e.$t("m.New_Password"),prop:"newPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formPassword.newPassword,callback:function(s){e.$set(e.formPassword,"newPassword",s)},expression:"formPassword.newPassword"}})],1),a("el-form-item",{attrs:{label:e.$t("m.Confirm_New_Password"),prop:"againPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formPassword.againPassword,callback:function(s){e.$set(e.formPassword,"againPassword",s)},expression:"formPassword.againPassword"}})],1)],1),a("el-popover",{attrs:{placement:"top",width:"350",trigger:"click"},model:{value:e.visible.passwordSlideBlock,callback:function(s){e.$set(e.visible,"passwordSlideBlock",s)},expression:"visible.passwordSlideBlock"}},[a("el-button",{attrs:{slot:"reference",type:"primary",loading:e.loading.btnPassword,disabled:e.disabled.btnPassword},slot:"reference"},[e._v(e._s(e.$t("m.Update_Password")))]),a("slide-verify",{directives:[{name:"show",rawName:"v-show",value:!e.verify.passwordSuccess,expression:"!verify.passwordSuccess"}],ref:"passwordSlideBlock",attrs:{l:42,r:10,w:325,h:100,accuracy:3,"slider-text":e.$t("m.Slide_Verify")},on:{success:e.changePassword,again:function(s){return e.onAgain("password")}}}),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.verify.passwordSuccess,expression:"verify.passwordSuccess"}],attrs:{title:e.$t("m.Slide_Verify_Success"),type:"success",description:e.verify.passwordMsg,center:!0,closable:!1,"show-icon":""}})],1)],1),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.visible.passwordAlert.show,expression:"visible.passwordAlert.show"}],staticStyle:{"margin-top":"15px"},attrs:{title:e.visible.passwordAlert.title,type:e.visible.passwordAlert.type,description:e.visible.passwordAlert.description,closable:!1,effect:"dark","show-icon":""}})],1),a("el-col",{attrs:{md:4,lg:4}},[a("div",{staticClass:"separator hidden-md-and-down"}),a("p")]),a("el-col",{attrs:{sm:24,md:10,lg:10}},[a("div",{staticClass:"right"},[a("p",{staticClass:"section-title"},[e._v(e._s(e.$t("m.Change_Email")))]),a("el-form",{ref:"formEmail",staticClass:"setting-content",attrs:{model:e.formEmail,rules:e.ruleEmail}},[a("el-form-item",{attrs:{label:e.$t("m.Current_Password"),prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formEmail.password,callback:function(s){e.$set(e.formEmail,"password",s)},expression:"formEmail.password"}})],1),a("el-form-item",{attrs:{label:e.$t("m.Old_Email")}},[a("el-input",{attrs:{disabled:""},model:{value:e.formEmail.oldEmail,callback:function(s){e.$set(e.formEmail,"oldEmail",s)},expression:"formEmail.oldEmail"}})],1),a("el-form-item",{attrs:{label:e.$t("m.New_Email"),prop:"newEmail"}},[a("el-input",{model:{value:e.formEmail.newEmail,callback:function(s){e.$set(e.formEmail,"newEmail",s)},expression:"formEmail.newEmail"}})],1)],1),a("el-popover",{attrs:{placement:"top",width:"350",trigger:"click"},model:{value:e.visible.emailSlideBlock,callback:function(s){e.$set(e.visible,"emailSlideBlock",s)},expression:"visible.emailSlideBlock"}},[a("el-button",{attrs:{slot:"reference",type:"primary",loading:e.loading.btnEmailLoading,disabled:e.disabled.btnEmail},slot:"reference"},[e._v(e._s(e.$t("m.Update_Email")))]),a("slide-verify",{directives:[{name:"show",rawName:"v-show",value:!e.verify.emailSuccess,expression:"!verify.emailSuccess"}],ref:"emailSlideBlock",attrs:{l:42,r:10,w:325,h:100,accuracy:3,"slider-text":e.$t("m.Slide_Verify")},on:{success:e.changeEmail,again:function(s){return e.onAgain("email")}}}),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.verify.emailSuccess,expression:"verify.emailSuccess"}],attrs:{title:e.$t("m.Slide_Verify_Success"),type:"success",description:e.verify.emailMsg,center:!0,closable:!1,"show-icon":""}})],1)],1),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.visible.emailAlert.show,expression:"visible.emailAlert.show"}],staticStyle:{"margin-top":"15px"},attrs:{title:e.visible.emailAlert.title,type:e.visible.emailAlert.type,description:e.visible.emailAlert.description,closable:!1,effect:"dark","show-icon":""}})],1)],1)],1)},r=[],t=(a("b680"),a("3228")),l=a("7aa9"),o=(a("e05f"),{data:function(){var e=this,s=[{required:!0,trigger:"blur"},{trigger:"blur",min:6,max:20,message:this.$i18n.t("m.Password_Check_Between")}],a=function(s,a,i){a!==e.formPassword.newPassword&&i(new Error(e.$i18n.t("m.Password_does_not_match"))),i()},i=function(s,a,i){""!==e.formPassword.oldPassword&&(e.formPassword.oldPassword===e.formPassword.newPassword?i(new Error(e.$i18n.t("m.The_new_password_does_not_change"))):e.$refs.formPassword.validateField("again_password")),i()},r=function(s,a,i){""!==e.formEmail.oldEmail&&e.formEmail.oldEmail===e.formEmail.newEmail&&i(new Error(e.$i18n.t("m.The_new_email_does_not_change"))),i()};return{loading:{btnPassword:!1,btnEmail:!1},disabled:{btnPassword:!1,btnEmail:!1},verify:{passwordSuccess:!1,passwordMsg:"",emailSuccess:!1,emailMsg:""},visible:{passwordAlert:{type:"success",show:!1,title:"",description:""},emailAlert:{type:"success",show:!1,title:"",description:""},passwordSlideBlock:!1,emailSlideBlock:!1},formPassword:{oldPassword:"",newPassword:"",againPassword:""},formEmail:{password:"",oldEmail:"",newEmail:""},rulePassword:{oldPassword:s,newPassword:[{required:!0,trigger:"blur"},{trigger:"blur",min:6,max:20,message:this.$i18n.t("m.Password_Check_Between")},{validator:i,trigger:"blur"}],againPassword:[{required:!0,trigger:"blur",message:this.$i18n.t("m.Password_Again_Check_Required")},{validator:a,trigger:"blur"}]},ruleEmail:{password:s,newEmail:[{required:!0,message:this.$i18n.t("m.Email_Check_Required"),trigger:"blur"},{type:"email",trigger:"change",message:this.$i18n.t("m.Email_Check_Format")},{validator:r,trigger:"blur"}]}}},mounted:function(){this.formEmail.oldEmail=this.$store.getters.userInfo.email||""},methods:{changePassword:function(e){var s=this;this.verify.passwordSuccess=!0;var a=(e/1e3).toFixed(1);this.verify.passwordMsg="Total time "+a+"s",setTimeout((function(){s.visible.passwordSlideBlock=!1,s.verify.passwordSuccess=!1,s.$refs.passwordSlideBlock.reset()}),1e3),this.$refs["formPassword"].validate((function(e){if(e){s.loading.btnPassword=!0;var a=Object.assign({},s.formPassword);delete a.againPassword,t["a"].changePassword(a).then((function(e){s.loading.btnPassword=!1,200==e.data.data.code?(l["a"].success(s.$i18n.t("m.Update_Successfully")),s.visible.passwordAlert={show:!0,title:s.$i18n.t("m.Update_Successfully"),type:"success",description:e.data.data.msg},setTimeout((function(){s.visible.passwordAlert=!1,s.$router.push({name:"Logout"})}),5e3)):(l["a"].error(e.data.msg),s.visible.passwordAlert={show:!0,title:s.$i18n.t("m.Update_Failed"),type:"warning",description:e.data.data.msg},403==e.data.data.code&&(s.visible.passwordAlert.type="error",s.disabled.btnPassword=!0))}),(function(e){s.loading.btnPassword=!1}))}}))},changeEmail:function(e){var s=this;this.verify.emailSuccess=!0;var a=(e/1e3).toFixed(1);this.verify.emailMsg="Total time "+a+"s",setTimeout((function(){s.visible.emailSlideBlock=!1,s.verify.emailSuccess=!1,s.$refs.emailSlideBlock.reset()}),1e3),this.$refs["formEmail"].validate((function(e){if(e){s.loading.btnEmail=!0;var a=Object.assign({},s.formEmail);t["a"].changeEmail(a).then((function(e){s.loading.btnEmail=!1,200==e.data.data.code?(l["a"].success(s.$i18n.t("m.Update_Successfully")),s.visible.emailAlert={show:!0,title:s.$i18n.t("m.Update_Successfully"),type:"success",description:e.data.data.msg},s.$store.dispatch("setUserInfo",e.data.data.userInfo),s.$refs["formEmail"].resetFields(),s.formEmail.oldEmail=e.data.data.userInfo.email):(l["a"].error(e.data.msg),s.visible.emailAlert={show:!0,title:s.$i18n.t("m.Update_Failed"),type:"warning",description:e.data.data.msg},403==e.data.data.code&&(s.visible.emailAlert.type="error",s.disabled.btnEmail=!0))}),(function(e){s.loading.btnEmail=!1}))}}))},onAgain:function(e){"password"?this.$refs.passwordSlideBlock.reset():this.$refs.emailSlideBlock.reset(),l["a"].warning(this.$i18n.t("m.Guess_robot"))}}}),d=o,n=(a("a8ba"),a("2877")),m=Object(n["a"])(d,i,r,!1,null,"4da2215a",null);s["default"]=m.exports},a8ba:function(e,s,a){"use strict";a("bb07")},bb07:function(e,s,a){}}]);